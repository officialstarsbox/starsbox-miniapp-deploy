@charset "UTF-8";

/* =========================
   0) ШРИФТЫ
========================= */
@font-face{
  font-family: "Tilda";
  src: url("./assets/fonts/TildaSans-Semibold.woff2") format("woff2");
  font-weight: 100 900;
  font-style: normal;
  font-display: swap;
}
@font-face{
  font-family: "TildaSans";
  src: url("./assets/fonts/TildaSans-Regular.woff2") format("woff2");
  font-weight: 200 800;
  font-style: normal;
  font-display: swap;
}

/* =========================
   1) БАЗА / ПЕРЕМЕННЫЕ
========================= */
:root{
  /* Тема */
  --bg: var(--tg-theme-bg-color, #0b0e1b);
  --text: var(--tg-theme-text-color, #ffffff);
  --muted: var(--tg-theme-hint-color, #a7b0c0);

  /* UI */
  --card: rgba(255,255,255,0.06);
  --card-brd: rgba(255,255,255,0.10);
  --shadow: 0 8px 24px rgba(0,0,0,.35);
  --radius: 16px;

  /* Шрифты */
  --font-ui: "TildaSans", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
  --font-accent: "Tilda", "Tilda", system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;

  /* Макет */
  --column-w: clamp(360px, 92vw, 520px); /* ширина колонки */
  --page-xpad: 5px;                      /* боковые поля для шапки/контента */
  --header-top: calc(env(safe-area-inset-top,0px) + 10px);
  --content-gap: 25px;

  /* Фон */
  --bg-grad: radial-gradient(120% 160% at 50% -10%, #1a2037 0%, var(--bg) 55%, #0b0e1b 100%);

  /* Нижняя навигация */
  --nav-bottom: 25px;
  --nav-height: 72px;
  --nav-radius: var(--radius);
}

/* планшет/десктоп — шире колонка */
@media (min-width:768px){ :root{ --column-w: 640px; } }
@media (min-width:1024px){ :root{ --column-w: 760px; } }

/* =========================
   2) БАЗОВЫЕ СТИЛИ СТРАНИЦЫ
========================= */
*{ box-sizing:border-box }
html,body{ height:100% }
html, body{ background: transparent; }

body{
  margin:0;
  color:var(--text);
  font: 500 16px/1.4 var(--font-ui);
  -webkit-font-smoothing:antialiased;
}
/* фиксированный фоновый градиент, контент скроллится поверх */
body::before{
  content:"";
  position:fixed; inset:0; z-index:-1;
  background: var(--bg-grad);
  will-change: transform;
  transform: translateZ(0);
}

/* =========================
   3) ШАПКА
========================= */
.app-header{
  max-width: var(--column-w);
  margin: var(--header-top) auto var(--content-gap);
  padding: 8px var(--page-xpad);
  display:flex; align-items:center; gap:12px;
}
.avatar{
  width:48px; height:48px; flex:0 0 48px;
  border-radius:50%; overflow:hidden;
  display:grid; place-items:center;
  background: linear-gradient(135deg,#151a2b,#2b3558);
  border:0; box-shadow: var(--shadow);
  font-weight:800; letter-spacing:.5px;
}
.avatar img{
  width:100%; height:100%;
  object-fit:cover; border-radius:50%;
  display:block; -webkit-user-drag:none; user-select:none;
}
.account .title{
  font-size:22px; font-weight:700;
  font-family: var(--font-accent, var(--font-ui));
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.account .subtitle{ font-size:15px; color:var(--muted) }

.icon-btn{
  margin-left:auto; width:45px; height:45px; border-radius:12px;
  display:grid; place-items:center;
  background: rgba(255,255,255,.06);
  border:1px solid var(--card-brd); cursor:pointer;
  position:relative;
}
.icon-btn.has-icon{ color:transparent; font-size:0; }
.icon-btn::before{
  content:""; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width: var(--icon-btn-size, 22px); height: var(--icon-btn-size, 22px);
  background-image: var(--icon-btn-image, url("./assets/icons/settings2.png"));
  background-repeat:no-repeat; background-position:center; background-size:contain;
  opacity: var(--icon-btn-opacity, 1); pointer-events:none;
}

/* =========================
   4) КОНТЕНТ + СЕТКА
========================= */
.content{
  max-width: var(--column-w);
  margin: 0 auto;
  padding: 0px var(--page-xpad)
           calc(env(safe-area-inset-bottom,0px) + var(--nav-bottom) + var(--nav-height) + 24px);
}
.grid{ display:grid; grid-template-columns:1fr 1fr; gap:5px; }

/* =========================
   5) ПАНЕЛИ (общий каркас)
========================= */
.panel{
  position:relative;
  border-radius: var(--radius);
  background: var(--card);
  border:0; box-shadow: var(--shadow);
  overflow:hidden; color:#fff;

  /* текстовые переменные по умолчанию */
  --content-pad: 14px;
  --text-align: left;

  --title-size: 17px;
  --title-weight: 800;
  --title-color: #ffffff;
  --title-line: 1.2;
  --title-letter: 0;
  --title-shadow: none;

  --title-position: relative;
  --title-top: auto; --title-right: auto; --title-bottom: auto; --title-left: auto;
  --title-translate-x: 0; --title-translate-y: 0;

  --sub-size: 13px; --sub-weight: 500;
  --sub-color: rgba(255,255,255,.9);
  --sub-line: 1.3; --sub-letter: 0; --sub-shadow: none; --sub-mt: 2px;

  --sub-position: relative;
  --sub-top: auto; --sub-right: auto; --sub-bottom: auto; --sub-left: auto;
  --sub-translate-x: 0; --sub-translate-y: 0;
}

.panel__bg{
  position:absolute; inset:0; z-index:0;
  background-repeat:no-repeat; background-position:center; background-size:cover;
}
.panel::after{
  content:""; position:absolute; inset:0; z-index:1; pointer-events:none;
  background: linear-gradient(135deg, rgb(12,20,72) 0%, rgba(0,0,0,.5) 90%);
}
.panel__content{
  position:relative; z-index:3;
  padding: var(--content-pad);
  text-align: var(--text-align);
}
.tile-title{
  margin:0; font-size: var(--title-size); font-weight: var(--title-weight);
  color: var(--title-color); line-height: var(--title-line);
  letter-spacing: var(--title-letter); text-shadow: var(--title-shadow);
  position: var(--title-position);
  top: var(--title-top); right: var(--title-right);
  bottom: var(--title-bottom); left: var(--title-left);
  transform: translate(var(--title-translate-x), var(--title-translate-y));
  font-family: var(--font-accent, var(--font-ui));
}
.tile-sub{
  margin-top: var(--sub-mt);
  font-size: var(--sub-size); font-weight: var(--sub-weight);
  color: var(--sub-color); line-height: var(--sub-line);
  letter-spacing: var(--sub-letter); text-shadow: var(--sub-shadow);
  position: var(--sub-position);
  top: var(--sub-top); right: var(--sub-right);
  bottom: var(--sub-bottom); left: var(--sub-left);
  transform: translate(var(--sub-translate-x), var(--sub-translate-y));
}
.panel__icon{
  position:absolute; z-index:3; pointer-events:none;
  width:28px; height:28px; right:12px; bottom:12px;
  background-repeat:no-repeat; background-position:center; background-size:contain;
}
.panel__btn{
  display:block; font-weight:700; text-align:center; border:none; outline:none;
  background: rgba(255,255,255,.9); color:#0b0e1b;
  padding:12px 14px; border-radius:12px; z-index:4;
}

/* =========================
   6) ПАНЕЛИ: BUY / SELL / GIFTS / STEAM
========================= */
/* BUY */
.panel--buy{
  --h: 100px; height: var(--h);
  --content-pad: 14px; --text-align: left;
  --title-size: 20px; --title-weight: 800; --title-color:#fff; --title-letter: 1px;
  --sub-size: 14px; --sub-color: rgba(255,255,255,.9); --sub-mt: 4px; --sub-letter:1px;
}
.panel--buy .panel__bg{ background-image: url("./assets/backgrounds/stars4.png"); }
.panel--buy .panel__icon{
  width:20px; height:20px; right:18px; bottom:12px;
  background-image:url("./assets/icons/icon3.png");
}

/* SELL */
.panel--sell{
  --h: 100px; height: var(--h);
  --content-pad: 14px; --text-align: left;
  --title-size: 20px; --title-weight: 800; --title-color:#fff; --title-letter: 1px;
  --sub-size: 14px; --sub-color: rgba(255,255,255,.9); --sub-mt: 4px; --sub-letter:1px;
}
.panel--sell .panel__bg{ background-image: url("./assets/backgrounds/stars4.png"); }
.panel--sell .panel__icon{
  width:20px; height:20px; right:18px; bottom:12px;
  background-image:url("./assets/icons/icon2.png");
}

/* GIFTS */
.panel--gifts{
  --h: 300px; height: var(--h);
  --carousel-h: 120px; --btn-space: 90px;
  border-radius:24px;
  --content-pad: 18px; --text-align:left;
  --title-size:20px; --title-weight:900; --title-letter:1px;
  --sub-size:14px; --sub-mt:6px; --sub-letter:1px;
  margin-top:5px;
}
.panel--gifts .panel__bg{ background-image:url("./assets/backgrounds/gifts.jpg"); }
.panel--gifts .panel__icon{
  width:30px; height:30px; right:18px; bottom:245px;
  background-image:url("./assets/icons/подарок.png");
}
/* карусель — контейнер и трек */
.panel--gifts .carousel{
  position:absolute; left:14px; right:14px;
  bottom: var(--btn-space); height: var(--carousel-h);
  z-index:2; overflow:hidden; padding:0 8px 8px; border-radius: inherit;
  -webkit-mask-image: linear-gradient(to right, transparent 0, black 48px, black calc(100% - 48px), transparent 100%);
          mask-image: linear-gradient(to right, transparent 0, black 48px, black calc(100% - 48px), transparent 100%);
}
.panel--gifts .carousel-track{ display:flex; align-items:center; gap:12px; will-change: transform; }
.panel--gifts .carousel img{
  height: calc(var(--carousel-h) - 8px);
  width:auto; border-radius:12px; box-shadow:0 6px 16px rgba(0,0,0,0); user-select:none;
}
/* кнопка */
.panel--gifts .panel__btn{
  position:absolute; left:18px; right:18px; top:230px; width:auto;
  background: rgba(255,255,255,.9); color:#0b0e1b; border-radius:12px; padding:12px 14px;
}

/* STEAM */
.panel--steam{
  --h: 180px; height: var(--h);
  border-radius:24px; margin-top:5px;
  --content-pad: 18px; --text-align:left;
  --title-size:25px; --title-weight:800; --title-color:#fff;
  --sub-size:16px; --sub-color:rgba(255,255,255,.9); --sub-mt:4px;
}
.panel--steam .panel__bg{ background-image:url("./assets/backgrounds/steam2.jpg"); }
.panel--steam .panel__icon{
  width:30px; height:30px; right:18px; bottom:130px;
  background-image:url("./assets/icons/icon4.png");
}
.panel--steam .panel__btn{
  position:absolute; left:18px; right:18px; top:120px; width:auto;
  background: rgba(255,255,255,.95); color:#000; border-radius:12px; padding:12px 14px;
}

/* =========================
   7) НИЖНЯЯ НАВИГАЦИЯ (плавающая)
========================= */
.bottom-nav{
  position:fixed;
  left:50%; transform:translateX(-50%);
  bottom: calc(env(safe-area-inset-bottom,0px) + var(--nav-bottom));
  z-index:1000;

  width: min(100% - 2*var(--page-xpad), calc(var(--column-w) + 2*var(--page-xpad)));
  display:grid; grid-template-columns:repeat(4,1fr); gap:10px;

  padding:10px; border-radius: var(--nav-radius);
  background: rgba(11,14,27,0.85);
  border:1px solid var(--card-brd);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px);
}
.nav-item{
  appearance:none; border:none; background:transparent; color:#cfd6e6;
  display:flex; flex-direction:column; align-items:center; gap:4px;
  padding:8px 6px; border-radius:12px; cursor:pointer;
}
.nav-item.is-active{ color:#fff; background: rgba(3,0,169,.06); border:1px solid var(--card-brd); }
.nav-ic{ font-size:18px } .nav-tx{ font-size:12px }

/* Кастомные иконки пунктов меню */
.nav-item .nav-ic{ position:relative; width:24px; height:24px; line-height:0; font-size:0; }
.nav-item .nav-ic::before{
  content:""; position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  width: var(--nav-ic-size, 22px); height: var(--nav-ic-size, 22px);
  background-repeat:no-repeat; background-position:center; background-size:contain;
  opacity: var(--nav-ic-opacity, .95); pointer-events:none;
}
.nav-item[data-action="tab-home"]    .nav-ic::before{ background-image:url("./assets/icons/главная.png"); }
.nav-item[data-action="tab-earn"]    .nav-ic::before{ background-image:url("./assets/icons/акции.png"); }
.nav-item[data-action="tab-market"]  .nav-ic::before{ background-image:url("./assets/icons/заработать.png"); }
.nav-item[data-action="tab-profile"] .nav-ic::before{ background-image:url("./assets/icons/профиль.png"); }
.nav-item .nav-ic::before{ opacity:.85; }
.nav-item.is-active .nav-ic::before{ opacity:1; }

/* =========================
   8) АДАПТИВНЫЕ МЕЛОЧИ
========================= */
@media (max-width:380px){
  .panel--buy{  --h: 116px; }
  .panel--sell{ --h: 116px; }
}

/* Отступы между секциями */
.content .grid{ margin-top: 8px; }
.panel--gifts{  margin-top: 10px; }
.panel--steam{  margin-top: 10px; }
